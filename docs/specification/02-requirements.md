# 要件定義

## 機能要件

### 1. 認証・認可機能
- ユーザー登録・ログイン・ログアウト
- パスワードリセット機能
- ゲストユーザー（認証不要）の閲覧機能
- ロールベースのアクセス制御（RBAC）

### 2. 店舗管理機能
- 店舗情報の登録・編集・削除
- 店舗の営業時間設定
- 店舗の休業日設定
- 店舗画像のアップロード

### 3. メニュー管理機能
- ヘアメニュー（カット、カラー、パーマ、トリートメント、ヘッドスパなど）の登録・編集・削除
- メニューの料金設定
- メニューの所要時間設定（カット30分、カラー90分など）
- メニューの説明・画像の設定
- メニューカテゴリーの設定（カット、カラー、パーマ、トリートメントなど）

### 4. 予約管理機能
- 予約の作成（一般ユーザー・ゲスト）
- 予約の確認・変更・キャンセル
- 予約状況の確認（カレンダー表示）
- 予約の承認・却下（店舗側）
- 予約リマインダー（メール通知）

### 5. スタイリスト管理機能
- スタイリスト情報の登録・編集・削除
- スタイリストのスキル設定（カット、カラー、パーマ、ヘアセットなど）
- スタイリストの担当メニュー設定
- スタイリストのプロフィール画像設定
- スタイリストの経験年数・資格情報の管理

### 6. シフト管理機能
- シフトの作成・編集・削除
- シフトのカレンダー表示
- シフトのコピー機能
- シフトの承認フロー

### 7. ユーザー管理機能
- ユーザー情報の管理
- マイページ機能
- 予約履歴の閲覧
- お気に入り店舗機能

### 8. システム管理機能
- システム全体の設定管理
- ユーザー・店舗の一括管理
- アクティビティログの閲覧
- システム統計情報の表示

### 9. 顧客管理機能
- 顧客カードの作成・管理
- 来店履歴の記録・閲覧
- 顧客の髪質情報の記録（細い、太い、くせ毛、直毛など）
- 希望スタイル・カラー希望の記録
- カラー剤・パーマ剤のアレルギー情報管理
- 過去の施術内容の記録（前回のカット、カラー、パーマなど）
- 顧客の誕生日・記念日の管理
- 顧客の会員ランク管理
- 顧客のポイント残高管理
- 顧客の来店頻度分析（カット周期の把握など）

### 10. ポイント・クーポン機能
- ポイント付与システム（来店ごと、金額に応じて）
- ポイント使用機能
- クーポンの発行・管理
- 会員ランク制度（ブロンズ、シルバー、ゴールドなど）
- ランクに応じた特典設定
- 誕生日特典の自動付与

### 11. レビュー・評価機能
- 施術後のレビュー投稿（一般ユーザー）
- レビューの閲覧（全ユーザー・ゲスト）
- レビューの評価（役に立った）
- 店舗・スタッフへの評価
- レビューの管理（店舗店長・システム管理者）

### 12. キャンセル待ち機能
- キャンセル待ちの登録
- キャンセル発生時の自動通知
- キャンセル待ち一覧の管理

### 13. カウンセリングシート機能
- 予約時のカウンセリング情報入力
- 顧客の髪質・希望スタイル・カラー希望の記録
- 髪の悩み・要望の記録（ボリュームアップ、くせ毛の悩みなど）
- カラー剤・パーマ剤のアレルギー情報の確認
- 過去のカウンセリング履歴の閲覧
- スタイリストによるカウンセリング記録の追加
- 施術内容の記録（使用したカラー剤、パーマ剤など）

### 14. 施術写真管理機能
- カット前の写真アップロード
- カット後の写真アップロード
- カラー前後の写真アップロード
- パーマ前後の写真アップロード
- 写真の顧客への共有（マイページ、メール）
- 写真の管理・削除
- 写真のカテゴリー分け（カット、カラー、パーマなど）

### 15. 在庫管理機能
- カラー剤・商品の在庫管理
- 在庫の入荷・出荷記録
- 在庫アラート（在庫切れ通知）
- 材料費の記録

### 16. 売上管理機能
- 日次・月次・年次の売上集計
- メニュー別の売上分析
- スタッフ別の売上分析
- 顧客別の売上分析
- 売上レポートの出力

### 17. スタイリスト実績管理機能
- スタイリストの施術実績記録（カット数、カラー数、パーマ数など）
- スタイリストの評価・レビュー集計
- スタイリストの稼働時間管理
- スタイリストの売上実績
- スタイリストの得意メニュー分析

### 18. 予約最適化機能
- 予約の重複チェック
- 予約時間の自動調整提案
- 空き時間の自動検出
- リピート予約の推奨

### 19. 待ち時間管理機能
- リアルタイムの待ち時間表示
- 予約待ちの管理
- 到着確認機能

### 20. 通知・リマインダー機能
- 予約確定通知
- 予約リマインダー（前日・当日）
- キャンセル待ち通知
- ポイント付与通知
- クーポン有効期限通知
- 誕生日特典通知

## 非機能要件

### パフォーマンス
- ページの読み込み時間: 3秒以内
- 予約処理の応答時間: 1秒以内

### セキュリティ
- HTTPS通信の必須化
- SQLインジェクション対策
- XSS対策
- CSRF対策
- パスワードのハッシュ化

### 可用性
- システム稼働率: 99%以上
- データのバックアップ: 日次

### ユーザビリティ
- レスポンシブデザイン対応
- 直感的なUI/UX
- 多言語対応（将来的に）

## 制約事項
- Laravel 12を使用
- Vue.js + Inertia.jsによるSPA的な体験
- Laravel Permissionによる権限管理
- Laravel Activity Logによる操作履歴の記録
